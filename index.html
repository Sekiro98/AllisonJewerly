<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JOA & ALi  Jewelry</title>
  <link rel="stylesheet" href="style.css" />
</head>
  <!-- MODAL LOGIN -->
<div id="modal-login" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.42); z-index:3000; align-items:center; justify-content:center;">
  <form onsubmit="return loginUsuario(event)" style="background:#fff; padding:2rem; border-radius:18px; max-width:330px; margin:auto; box-shadow:0 0 20px rgba(0,0,0,0.12);">
    <h2 style="margin-top:0;">Iniciar sesi√≥n</h2>
    <label>Email:</label>
    <input type="email" id="login-email" required style="width:100%; margin-bottom:0.7rem;">
    <label>Contrase√±a:</label>
    <input type="password" id="login-password" required style="width:100%; margin-bottom:1.2rem;">
    <div style="display:flex; justify-content:space-between;">
      <button type="submit" class="boton">Entrar</button>
      <button type="button" class="boton" onclick="cerrarLogin()" style="background:#eee; color:#333;">Cancelar</button>
    </div>
  </form>
</div>
<!-- MODAL REGISTRO -->
<div id="modal-registro" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.42); z-index:3000; align-items:center; justify-content:center;">
  <form onsubmit="return registrarUsuario(event)" style="background:#fff; padding:2rem; border-radius:18px; max-width:330px; margin:auto; box-shadow:0 0 20px rgba(0,0,0,0.12);">
    <h2 style="margin-top:0;">Crear cuenta</h2>
    <label>Email:</label>
    <input type="email" id="reg-email" required style="width:100%; margin-bottom:0.7rem;">
    <label>Contrase√±a:</label>
    <input type="password" id="reg-password" required style="width:100%; margin-bottom:1.2rem;">
    <div style="display:flex; justify-content:space-between;">
      <button type="submit" class="boton">Registrar</button>
      <button type="button" class="boton" onclick="cerrarRegistro()" style="background:#eee; color:#333;">Cancelar</button>
    </div>
  </form>
</div>
  <script>
function mostrarLogin() {
  document.getElementById('modal-login').style.display = 'flex';
}
function cerrarLogin() {
  document.getElementById('modal-login').style.display = 'none';
}
function mostrarRegistro() {
  document.getElementById('modal-registro').style.display = 'flex';
}
function cerrarRegistro() {
  document.getElementById('modal-registro').style.display = 'none';
}
</script>
<!-- BONO BIENVENIDA -->
<div id="bono-bienvenida" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(212,175,55,0.07); z-index:4000; align-items:center; justify-content:center;">
  <div style="background:#fffbe6; color:#444; padding:2rem; border-radius:20px; max-width:380px; margin:auto; box-shadow:0 0 32px rgba(212,175,55,0.18); text-align:center;">
    <h2>¬°Bono de Bienvenida!</h2>
    <p>Suscr√≠bete <b>mensualmente</b> y obt√©n <span style="color:#d4af37;font-weight:bold;">20% de descuento</span> en tu primera compra.</p>
    <button class="boton" onclick="cerrarBonoBienvenida()">¬°Aprovechar ahora!</button>
  </div>
</div>


<body>
  <header>
    <h1>Joa & Ali  Jewelry</h1>
    <nav>
      <div style="text-align:center; margin-top:10px;">
  <button onclick="mostrarLogin()" class="boton" style="margin-right:6px;">Iniciar sesi√≥n</button>
  <button onclick="mostrarRegistro()" class="boton">Registrarse</button>
</div>

      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="catalogo.html">Cat√°logo</a></li>
        <li><a href="servicios.html">Servicios</a></li>        
      </ul>
    </nav>
  </header>
  <main>
    <section class="hero">
      <h2>Brillando en cada momento</h2>
      <a href="catalogo.html" class="boton">Ver Cat√°logo</a>
    </section>
  </main>
  <footer>
    <p>&copy; 2025 JOA & ALi Jewelry.Todos los derechos reservados.</p>
  </footer>
  <img src="img/logo.png" alt="Allison Jewelry Logo" class="floating-logo" />
  <script>
function mostrarBonoBienvenida() {
  document.getElementById('bono-bienvenida').style.display = 'flex';
}
function cerrarBonoBienvenida() {
  document.getElementById('bono-bienvenida').style.display = 'none';
}
</script>
  <script>
  // --------- MODALES UI ---------
  function mostrarLogin() { document.getElementById('modal-login').classList.add('modal-activo'); }
  function cerrarLogin() { document.getElementById('modal-login').classList.remove('modal-activo'); }
  function mostrarRegistro() { document.getElementById('modal-registro').classList.add('modal-activo'); }
  function cerrarRegistro() { document.getElementById('modal-registro').classList.remove('modal-activo'); }
  function mostrarBonoBienvenida(codigo) {
    document.getElementById('codigo-bono').textContent = codigo;
    document.getElementById('bono-bienvenida').classList.add('modal-activo');
  }
  function cerrarBonoBienvenida() { document.getElementById('bono-bienvenida').classList.remove('modal-activo'); }

  // --------- LOGIN/REGISTRO ---------
  function loginUsuario(e) {
    e.preventDefault();
    let email = document.getElementById('login-email').value;
    let password = document.getElementById('login-password').value;
    auth.signInWithEmailAndPassword(email, password)
      .then(userCredential => { cerrarLogin(); })
      .catch(error => { alert('Error: ' + error.message); });
    return false;
  }

  function registrarUsuario(e) {
    e.preventDefault();
    let email = document.getElementById('reg-email').value;
    let password = document.getElementById('reg-password').value;
    auth.createUserWithEmailAndPassword(email, password)
      .then(userCredential => {
        cerrarRegistro();
        let codigo = "BONO-" + Math.random().toString(36).substring(2,8).toUpperCase();
        localStorage.setItem("bonoUsuario", codigo);
        mostrarBonoBienvenida(codigo);
      })
      .catch(error => { alert('Error: ' + error.message); });
    return false;
  }

  // --------- LOGIN GOOGLE ---------
  function loginGoogle() {
    var provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(result => { cerrarLogin(); })
      .catch(error => { alert('Error: ' + error.message); });
  }

  // --------- MOSTRAR USUARIO O BOTONES ---------
  function mostrarUIUsuario(user) {
    const cont = document.getElementById('login-registro-container');
    if (user) {
      let nombre = user.displayName || user.email;
      let bono = localStorage.getItem("bonoUsuario") ? `<br><span style='color:#d4af37'>Bono: ${localStorage.getItem("bonoUsuario")}</span>` : "";
      cont.innerHTML = `
        <div class="usuario-bienvenida">
          <span>üëã Bienvenido, <b>${nombre}</b>${bono}</span>
          <button onclick="logoutUsuario()">Salir</button>
        </div>
      `;
    } else {
      cont.innerHTML = `
        <button onclick="mostrarLogin()" class="boton" style="margin-right:6px;">Iniciar sesi√≥n</button>
        <button onclick="mostrarRegistro()" class="boton">Registrarse</button>
      `;
    }
  }
  function logoutUsuario() { auth.signOut().then(() => { mostrarUIUsuario(null); }); }
  auth.onAuthStateChanged(function(user) { mostrarUIUsuario(user); });
</script>

</body>
</html>
