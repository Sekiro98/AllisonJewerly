<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JOA & ALi  Jewelry</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .modal-fondo {
      display: none;
      position: fixed; left:0; top:0; width:100vw; height:100vh;
      background: rgba(0,0,0,0.42); z-index:3000;
      align-items:center; justify-content:center;
    }
    .modal-activo { display: flex !important; }
    .modal-caja {
      background:#fff;
      padding:2rem;
      border-radius:18px;
      max-width:330px;
      margin:auto;
      box-shadow:0 0 20px rgba(0,0,0,0.12);
    }
    .modal-caja h2 { margin-top:0; }
    .modal-caja input { width:100%; margin-bottom:1.1rem; }
    .bono-bienvenida {
      background:#fffbe6;
      color:#444;
      padding:2rem;
      border-radius:20px;
      max-width:380px;
      margin:auto;
      box-shadow:0 0 32px rgba(212,175,55,0.18);
      text-align:center;
    }
    .usuario-bienvenida {
      background: #f8f8f8;
      color: #333;
      border-radius: 10px;
      padding: 0.6rem 1.3rem;
      font-size: 1.04rem;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      margin: 18px auto 0 auto;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }
    .usuario-bienvenida button {
      margin-left: 8px;
      background: #d4af37;
      color: #111;
      border: none;
      border-radius: 7px;
      padding: 4px 13px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.18s;
    }
    .usuario-bienvenida button:hover {
      background: #c9a733;
    }
    .floating-logo {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 70px;
      z-index: 1000;
      opacity: 0.90;
      border-radius: 12px;
      box-shadow: 0 0 14px rgba(0,0,0,0.20);
    }
  </style>
  <!-- Firebase App (core) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <!-- Firebase Auth -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    // Configuraci√≥n de Firebase:
    const firebaseConfig = {
  apiKey: "AIzaSyDhlePkvOseMzsZ89JvWI1hooew7gdrbKI",
  authDomain: "sample-firebase-ai-app-28e9e.firebaseapp.com",
  projectId: "sample-firebase-ai-app-28e9e",
  storageBucket: "sample-firebase-ai-app-28e9e.firebasestorage.app",
  messagingSenderId: "269607356233",
  appId: "1:269607356233:web:b5b338e36dd047c157fc98"
};
    
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
  </script>
</head>
<body>
  <header>
    <h1>Joa & Ali  Jewelry</h1>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="catalogo.html">Cat√°logo</a></li>
        <li><a href="servicios.html">Servicios</a></li>        
      </ul>
      <div id="login-registro-container" style="text-align:center; margin-top:10px;"></div>
    </nav>
  </header>
  <main>
    <section class="hero">
      <h2>Brillando en cada momento</h2>
      <a href="catalogo.html" class="boton">Ver Cat√°logo</a>
    </section>
  </main>
  <footer>
    <p>&copy; 2025 JOA & ALi Jewelry. Todos los derechos reservados.</p>
  </footer>

  <!-- MODAL LOGIN -->
  <div id="modal-login" class="modal-fondo">
    <form onsubmit="return loginUsuario(event)" class="modal-caja">
      <h2>Iniciar sesi√≥n</h2>
      <label>Email:</label>
      <input type="email" id="login-email" required>
      <label>Contrase√±a:</label>
      <input type="password" id="login-password" required>
      <div style="display:flex; flex-direction:column; gap:10px; margin-top:10px;">
        <button type="submit" class="boton">Entrar</button>
        <button type="button" class="boton" onclick="cerrarLogin()" style="background:#eee; color:#333;">Cancelar</button>
      </div>
    </form>
  </div>
  <!-- MODAL REGISTRO -->
  <div id="modal-registro" class="modal-fondo">
    <form onsubmit="return registrarUsuario(event)" class="modal-caja">
      <h2>Crear cuenta</h2>
      <label>Email:</label>
      <input type="email" id="reg-email" required>
      <label>Contrase√±a:</label>
      <input type="password" id="reg-password" required>
      <div style="display:flex; justify-content:space-between;">
        <button type="submit" class="boton">Registrar</button>
        <button type="button" class="boton" onclick="cerrarRegistro()" style="background:#eee; color:#333;">Cancelar</button>
      </div>
    </form>
  </div>
  <!-- BONO BIENVENIDA -->
  <div id="bono-bienvenida" class="modal-fondo">
    <div class="bono-bienvenida">
      <h2>¬°Bono de Bienvenida!</h2>
      <p>Tu c√≥digo de descuento para nuevos usuarios:</p>
      <div id="codigo-bono" style="font-size:1.7rem;font-weight:bold; color:#d4af37; letter-spacing:1.5px; margin:1rem 0;"></div>
      <p>Suscr√≠bete <b>mensualmente</b> y obt√©n <span style="color:#d4af37;font-weight:bold;">20% de descuento</span> en tu primera compra.</p>
      <button class="boton" onclick="cerrarBonoBienvenida()">¬°Aprovechar ahora!</button>
    </div>
  </div>
  <img src="img/logo.png" alt="Allison Jewelry Logo" class="floating-logo" />

  <script>
    // --------- MODALES UI ---------
    function mostrarLogin() { document.getElementById('modal-login').classList.add('modal-activo'); }
    function cerrarLogin() { document.getElementById('modal-login').classList.remove('modal-activo'); }
    function mostrarRegistro() { document.getElementById('modal-registro').classList.add('modal-activo'); }
    function cerrarRegistro() { document.getElementById('modal-registro').classList.remove('modal-activo'); }
    function mostrarBonoBienvenida(codigo) {
      document.getElementById('codigo-bono').textContent = codigo;
      document.getElementById('bono-bienvenida').classList.add('modal-activo');
    }
    function cerrarBonoBienvenida() {
      document.getElementById('bono-bienvenida').classList.remove('modal-activo');
    }

    // --------- LOGIN/REGISTRO ---------
    function loginUsuario(e) {
      e.preventDefault();
      let email = document.getElementById('login-email').value;
      let password = document.getElementById('login-password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => { cerrarLogin(); })
        .catch(error => { alert('Error: ' + error.message); });
      return false;
    }

    function registrarUsuario(e) {
      e.preventDefault();
      let email = document.getElementById('reg-email').value;
      let password = document.getElementById('reg-password').value;
      auth.createUserWithEmailAndPassword(email, password)
        .then(userCredential => {
          cerrarRegistro();
          let codigo = "BONO-" + Math.random().toString(36).substring(2,8).toUpperCase();
          localStorage.setItem("bonoUsuario", codigo);
          mostrarBonoBienvenida(codigo);
        })
        .catch(error => { alert('Error: ' + error.message); });
      return false;
    }

    // --------- MOSTRAR USUARIO O BOTONES ---------
    function mostrarUIUsuario(user) {
      const cont = document.getElementById('login-registro-container');
      if (user) {
        let nombre = user.displayName || user.email;
        let bono = localStorage.getItem("bonoUsuario") ? `<br><span style='color:#d4af37'>Bono: ${localStorage.getItem("bonoUsuario")}</span>` : "";
        cont.innerHTML = `
          <div class="usuario-bienvenida">
            <span>üëã Bienvenido, <b>${nombre}</b>${bono}</span>
            <button onclick="logoutUsuario()">Salir</button>
          </div>
        `;
      } else {
        cont.innerHTML = `
          <button onclick="mostrarLogin()" class="boton" style="margin-right:6px;">Iniciar sesi√≥n</button>
          <button onclick="mostrarRegistro()" class="boton">Registrarse</button>
        `;
      }
    }
    function logoutUsuario() { auth.signOut().then(() => { mostrarUIUsuario(null); }); }
    auth.onAuthStateChanged(function(user) { mostrarUIUsuario(user); });
  </script>
</body>
</html>

